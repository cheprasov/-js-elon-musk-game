!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GAME_WIDTH=800,t.GAME_HEIGHT=600},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setImage(t.image),this.setSize(t.width,t.height),"sprites"in t&&this.setSprites(t.sprites),this.scale=t.scale||1,this.loop=t.loop||1/0}return o(e,[{key:"setSize",value:function(e,t){this.width=e||0,this.height=t||0}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getScale",value:function(){return this.scale}},{key:"setSprites",value:function(e){if(this.sprites={loops:e.loops||1,speed:e.speed||1,count:e.count||1,frames:e.frames||[],_time:0},this.sprites.rate=this.sprites.speed/this.sprites.count,e&&e.grid&&e.grid.cols&&e.grid.rows)for(var t=0,n=0;n<e.grid.rows;n+=1)for(var o=0;o<e.grid.cols;o+=1)t<this.sprites.count&&(this.sprites.frames.push({x:o*this.width+(e.grid.x||0),y:n*this.height+(e.grid.y||0)}),t+=1)}},{key:"setImage",value:function(e){var t=this;this.image=null;var n=new Image;n.onload=function(){t.image=n},n.src=e}},{key:"render",value:function(e,t){if(!this.image)return!0;if(this.loop<=0)return!1;if(this.scale&&1!==this.scale&&e.scale(this.scale,this.scale),this.sprites){this.sprites._time||(this.lastIndex=-1,this.sprites._time=t);var n=t-this.sprites._time,o=Math.floor(n%this.sprites.speed/this.sprites.rate);if(o<this.lastIndex&&--this.loop<=0)return!1;this.lastIndex=o;var r=this.sprites.frames[o];e.drawImage(this.image,r.x,r.y,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height)}else e.drawImage(this.image,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height);return!0}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r={},i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"getRequestAnimFrame",value:function(){return e.requestAnimFrame?e.requestAnimFrame:(window?e.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}:e.requestAnimFrame=function(e){setTimeout(e,1e3/60)},e.requestAnimFrame)}},{key:"requestAnimationFrame",value:function(t){return function n(){var o=Date.now();t(o)&&e.getRequestAnimFrame()(n)}}},{key:"onReady",value:function(e){var t=function t(){document.removeEventListener("DOMContentLoaded",t),window.removeEventListener("load",t),e()};"complete"===document.readyState?t():(document.addEventListener("DOMContentLoaded",t),window.addEventListener("load",t))}},{key:"bind",value:function(e,t,n,o){e.addEventListener(t,function(e){n&&!e.target.classList.contains(n)||o(e.target)})}},{key:"event",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;r[e]||(r[e]=[]),r[e].push({callback:t,count:n})}},{key:"getEventList",value:function(){return r}},{key:"clearEventList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?delete r[e]:r={}}},{key:"trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e&&r[e]&&r[e].length){for(var n=0;n<r[e].length;n+=1)r[e][n].count-- >0&&r[e][n].callback(t);for(var o=r[e].length-1;o>=0;o-=1)r[e][o].count<=0&&r[e].splice(o,1)}}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(6),a=(o=i)&&o.__esModule?o:{default:o},u=n(0);var s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.time=Date.now(),n.speed=1500,n.period=n.speed,n.position={x:145*e+100,y:u.GAME_HEIGHT-50*Math.random(),z:1},n.destPosition={x:n.position.x,y:200,z:.8},n.rotate=n._getAngle(n.position.y,n.position.x,n.destPosition.y,n.destPosition.x),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"_getDestPosition",value:function(e){return this.destPosition}},{key:"_getAngle",value:function(e,t,n,o){var r=n-e,i=o-t,a=Math.abs(Math.round(180*Math.atan(r/i)/Math.PI));return n>=e?o>=t||(a=180-a):o>=t?a=360-a:a+=180,a}},{key:"_getDelta",value:function(e){return Math.min((e-this.time)/this.period,1)}},{key:"getPosition",value:function(e){var t=this._getDestPosition(e),n=this._getDelta(e);return{x:this.position.x+(t.x-this.position.x)*n,y:this.position.y+(t.y-this.position.y)*n,z:this.position.z+(t.z-this.position.z)*n}}},{key:"getRotate",value:function(e){return this.rotate+90}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_GAME_WIN=t.EVENT_ROCKET_DESTROYED=t.EVENT_ROCKET_SELECTED=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=h(n(21)),i=n(12),a=h(n(2)),u=h(n(11)),s=n(5),c=h(s),l=h(n(9)),f=h(n(3)),d=h(n(8)),p=h(n(7));function h(e){return e&&e.__esModule?e:{default:e}}var y=t.EVENT_ROCKET_SELECTED="event_rocket_selected",v=t.EVENT_ROCKET_DESTROYED="event_rocket_destroyed",b=t.EVENT_GAME_WIN="event_game_win",g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._setConfig(t),this.canvas=null,this.container=document.getElementById(this._getConfig().containerId),this.container.innerHTML=i.template,this.timeouts=[],this._clear()}return o(e,[{key:"setTimeout",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=setTimeout(e,t);this.timeouts.push(n)})},{key:"show",value:function(){this.show=function(){},this._render(),this._bindEvents()}},{key:"_setConfig",value:function(e){this.config=e}},{key:"_getConfig",value:function(){return this.config}},{key:"_setRender",value:function(e){this.render=e}},{key:"_getRender",value:function(){return this.render}},{key:"_render",value:function(){this.canvas=this.container.querySelector(".game-canvas"),this.canvas.width=this._getConfig().width,this.canvas.height=this._getConfig().height,this._setRender(new r.default(this.canvas))}},{key:"_bindEvents",value:function(){var e=this,t=this.container;a.default.bind(t,"click","js-game-play",function(){t.querySelector(".page-menu").style.display="none",t.querySelector(".page-fail").style.display="none",t.querySelector(".page-win").style.display="none",t.querySelector(".page-game").style.display="block",e._create()}),t.querySelector(".page-menu").style.display="block";var n=new u.default(this.container);a.default.bind(t,"click","js-game-select",function(t){var n=+t.dataset.id;e._selectRocket(n)}),a.default.event(y,function(n){t.querySelector(".page-game .buttons").style.display="none";for(var o=t.querySelector(".page-game .title"),r=function(t){e.setTimeout(function(){o.innerHTML="TIMER<br>00:0"+(3-t),2===t&&e._prepareRockets()},1e3*t)},i=0;i<=3;i++)r(i);e.setTimeout(function(){o.innerHTML="GO!",e._runRockets()},4e3),e.setTimeout(function(){o.innerHTML=""},5e3)}),a.default.event(v,function(t){t===e.selectedRocket&&e.setTimeout(function(){e._gameOver()},1e3)}),a.default.event(v,function(){n.sound("bomb",.4)}),a.default.event(b,function(){n.sound("win",1)})}},{key:"_getRockets",value:function(){for(var e=[null],t=[s.DESTROY_ON_START,s.DESTROY_BY_ASTEROID,s.DESTROY_ON_LANDING];e.length<5;){var n=Math.round(Math.random()*(t.length-1));e.push(t[n])}e.sort(function(){return 100*Math.random()-50}).sort(function(){return 100*Math.random()-50});for(var o=[],r=0;r<e.length;r++)o.push(new c.default(r,e[r]));return o}},{key:"getRockets",value:function(){return this.rockets||[]}},{key:"_create",value:function(){this._clear(),this.rockets=this._getRockets(),this._getRender().render(this)}},{key:"_clear",value:function(){Array.isArray(this.rockets)?this.rockets.length=[]:this.rockets=[],this.selectedRocket=null,this.container.querySelector(".page-game .buttons").style.display="block",this.container.querySelector(".page-game .title").innerHTML=i.title;var e=!0,t=!1,n=void 0;try{for(var o,r=this.timeouts[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var a=o.value;clearTimeout(a)}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}this.timeouts.length=0}},{key:"_selectRocket",value:function(e){var t=!0,n=!1,o=void 0;try{for(var r,i=this.rockets[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.getDestroyId()}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}this.selectedRocket=this.rockets[e]||null,a.default.trigger(y,c.default)}},{key:"_prepareRockets",value:function(){var e=!0,t=!1,n=void 0;try{for(var o,r=this.rockets[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){o.value.setIsRunned(!0)}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}},{key:"destroyRocket",value:function(e){e.destroy()}},{key:"_runRockets",value:function(){var e=this,t=function(t){t.setBehaviour(new l.default(t.getPosition())),t.getDestroyId()===s.DESTROY_ON_START&&e.setTimeout(function(){e.destroyRocket(t)},500)},n=!0,o=!1,r=void 0;try{for(var i,a=this.rockets[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){t(i.value)}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}this.setTimeout(function(){e.render.update(e);var t=!0,n=!1,o=void 0;try{for(var r,i=e.rockets[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;a.setBehaviour(new f.default(a.getNum()))}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}},2e3),this.setTimeout(function(){var t=!0,n=!1,o=void 0;try{for(var r,i=e.rockets[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;a.getDestroyId()||a.setBehaviour(new d.default(a.getPosition(Date.now()))),a.getDestroyId()===s.DESTROY_ON_LANDING&&a.setBehaviour(new p.default(a.getPosition(Date.now())))}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}},3e3),this.setTimeout(function(){e.selectedRocket&&!e.selectedRocket.getDestroyId()&&e._gameWin()},9e3)}},{key:"_gameOver",value:function(){this._clear(),this.render.clear(),this.container.querySelector(".page-fail").style.display="block"}},{key:"_gameWin",value:function(){this._clear(),this.render.clear(),this.container.querySelector(".page-win").style.display="block",a.default.trigger(b)}}]),e}();t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DESTROY_ON_LANDING=t.DESTROY_BY_ASTEROID=t.DESTROY_BY_UFO=t.DESTROY_ON_START=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(2)),i=u(n(13)),a=n(4);function u(e){return e&&e.__esModule?e:{default:e}}t.DESTROY_ON_START=1,t.DESTROY_BY_UFO=2,t.DESTROY_BY_ASTEROID=3,t.DESTROY_ON_LANDING=4;var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.destroyId=n,this.Behaviour=new i.default(t),this.isRunned=!1,this.isDestroyed=!1}return o(e,[{key:"getDestroyId",value:function(){return this.destroyId}},{key:"getNum",value:function(){return this.num}},{key:"setBehaviour",value:function(e){this.Behaviour=e}},{key:"getBehaviour",value:function(){return this.Behaviour}},{key:"setIsRunned",value:function(e){return this.isRunned=e}},{key:"getIsRunned",value:function(){return this.isRunned}},{key:"getRotate",value:function(e){return this.Behaviour.getRotate(e)}},{key:"getPosition",value:function(e){return this.Behaviour.getPosition(e)}},{key:"getIsDestroyed",value:function(){return this.isDestroyed}},{key:"destroy",value:function(){this.isDestroyed=!0,r.default.trigger(a.EVENT_ROCKET_DESTROYED,this)}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"getPosition",value:function(e){}},{key:"getRotate",value:function(e){}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(3),a=(o=i)&&o.__esModule?o:{default:o};n(0);var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0));return n.time=Date.now(),n.speed=3e3,n.period=3e3,n.position={x:e.x,y:e.y,z:e.z},n.destPosition={x:400+100*Math.random()-50,y:50+100*Math.random()-50,z:0},n.rotate=n._getAngle(n.position.y,n.position.x,n.destPosition.y,n.destPosition.x),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"_getDestPosition",value:function(e){return this.destPosition}},{key:"getRotate",value:function(e){var t=this._getDelta(e);return this.rotate+90+t*t*t*720}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(3),a=(o=i)&&o.__esModule?o:{default:o};n(0);var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0));return n.time=Date.now(),n.speed=5e3,n.period=5e3,n.position={x:e.x,y:e.y,z:e.z},n.destPosition={x:320,y:75,z:.05},n.rotate=n._getAngle(n.position.y,n.position.x,n.destPosition.y,n.destPosition.x),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"_getDestPosition",value:function(e){return this.destPosition}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(3),a=(o=i)&&o.__esModule?o:{default:o};n(0);var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0));return n.time=Date.now(),n.speed=2e3*Math.random()+3e4,n.period=2e3*Math.random()+1e3,n.position={x:e.x,y:e.y,z:e.z},n.destPosition={x:e.x+50*Math.random()-25,y:-200,z:.7},n.rotate=n._getAngle(n.position.y,n.position.x,n.destPosition.y,n.destPosition.x),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"_getDelta",value:function(e){var n=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getDelta",this).call(this,e);return n*n}},{key:"_getDestPosition",value:function(e){return this.destPosition}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"sound",value:function(e,t){}},{key:"music",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],!(arguments.length>2&&void 0!==arguments[2])||arguments[2]}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=a(n(10)),i=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.container=e;for(var o=n.container.querySelectorAll(".sound"),r=void 0,a=0;a<o.length;a+=1)r=o[a],i.default.bind(r,"play",!1,function(e){e.classList.add("playing")}),i.default.bind(r,"ended",!1,function(e){e.classList.remove("playing")});return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),o(t,[{key:"sound",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.container.querySelector(".sound.sound-"+e+":not(.playing)");n&&(n.volume=t||1,n.play())}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.title="What is the best company to buy a rocket?",t.template='\n    <div class="game">\n\n        <div class="page page-game">\n            <canvas class="game-canvas"></canvas>\n            <div class="title"></div>\n            <div class="buttons">\n                <button class="button button-select button-select-1 js-game-select" data-id="0">Samsung</button>\n                <button class="button button-select button-select-2 js-game-select" data-id="1">Sony</button>\n                <button class="button button-select button-select-3 js-game-select" data-id="2">Google</button>\n                <button class="button button-select button-select-4 js-game-select" data-id="3">Amazon</button>\n                <button class="button button-select button-select-5 js-game-select" data-id="4">Nasa</button>\n            </div>\n        </div>\n\n        <div class="page page-win">\n            <div class="title">\n                Congratulations!<br>Elon Musk prouds of you!\n            </div>\n            <button class="button button-replay js-game-play">Replay</button>\n        </div>\n        <div class="page page-fail">\n            <div class="title">\n                Ooops... your rocket has crashed!\n            </div>\n            <button class="button button-replay js-game-play">Try again</button>\n        </div>\n\n        <div class="page page-menu">\n            <div class="title">\n                Help Elon Musk to made history launching a car to Mars\n            </div>\n            <div class="title2">\n                Created by Alexander Cheprasov<br>\n                special for Gamesys\n            </div>\n            <button class="button button-start js-game-play">Play</button>\n            <img src="imgs/explosion.png" width="1" height="1" />\n            <img src="imgs/asteroid.png" width="1" height="1" />\n        </div>\n\n        <div class="sounds" style="display: none">\n            <audio controls class="sound sound-win">\n                <source src="mp3/win.mp3" />\n            </audio>\n\n            <audio controls class="sound sound-bomb">\n                <source src="mp3/bomb.mp3" />\n            </audio>\n            <audio controls class="sound sound-bomb">\n                <source src="mp3/bomb.mp3" />\n            </audio>\n            <audio controls class="sound sound-bomb">\n                <source src="mp3/bomb.mp3" />\n            </audio>\n            <audio controls class="sound sound-bomb">\n                <source src="mp3/bomb.mp3" />\n            </audio>\n            <audio controls class="sound sound-bomb">\n                <source src="mp3/bomb.mp3" />\n            </audio>\n            <audio controls class="sound sound-bomb">\n                <source src="mp3/bomb.mp3" />\n            </audio>\n        </div>\n    </div>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(6),a=(o=i)&&o.__esModule?o:{default:o};n(0);var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.position={x:145*e+100,y:385+(e>=2&&e<=3?34:0),z:1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"getPosition",value:function(e){return this.position}},{key:"getRotate",value:function(e){return 0}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(1),i=(o=r)&&o.__esModule?o:{default:o};var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{image:"imgs/mars.png",width:280,height:281}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(1),i=(o=r)&&o.__esModule?o:{default:o};var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{image:"imgs/asteroid.png",width:121,height:112}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(1),i=(o=r)&&o.__esModule?o:{default:o};var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{image:"imgs/fire.png",width:34,height:44,scale:1,sprites:{grid:{cols:2,rows:1},count:2,speed:200}}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(1),i=(o=r)&&o.__esModule?o:{default:o};var a=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:600;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{image:"imgs/"+e,width:n,height:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(1),i=(o=r)&&o.__esModule?o:{default:o};var a=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{image:"imgs/rocket"+e+".png",width:99,height:145}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(1),i=(o=r)&&o.__esModule?o:{default:o};var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{image:"imgs/explosion.png",width:100,height:100,scale:2,loop:1,sprites:{grid:{cols:9,rows:8},count:72,speed:500}}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"render",value:function(e){}},{key:"update",value:function(e){}},{key:"clear",value:function(){}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=y(n(20)),i=y(n(2)),a=y(n(7)),u=(n(0),n(4)),s=y(n(19)),c=y(n(18)),l=y(n(17)),f=y(n(16)),d=y(n(15)),p=y(n(14)),h=n(5);function y(e){return e&&e.__esModule?e:{default:e}}for(var v=[],b=1;b<=5;b++)v.push(new c.default(b));var g=new l.default("bg02.jpg"),_=new l.default("bg03.jpg",800,800),m=new f.default,w=new p.default,O=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.time=new Date,n.canvas=e,n.context=e.getContext("2d"),n.renderBgElements=[],n.renderElements=[],i.default.event(u.EVENT_ROCKET_DESTROYED,function(e){n.renderElements.push({type:"explosion",image:new s.default,position:e.getPosition(Date.now())})}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),o(t,[{key:"_getTime",value:function(){return this.time.getTime()}},{key:"render",value:function(e){var t=this;this.renderBgElements.push({type:"background",image:g,position:{x:400,y:300}});var n=i.default.requestAnimationFrame(function(n){var o=e.getRockets(),r=!0;if(t._clear(),t.renderBgElements.length){r=!1;for(var i=0;i<t.renderBgElements.length;i+=1)t._renderElement(n,t.renderBgElements[i])||t.renderBgElements.splice(i--,1)}if(o.length){r=!1;var a=!0,u=!1,s=void 0;try{for(var c,l=o[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value;t._renderRocket(n,f)}}catch(e){u=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(u)throw s}}}if(t.renderElements.length){r=!1;for(var d=0;d<t.renderElements.length;d+=1)t._renderElement(n,t.renderElements[d])||t.renderElements.splice(d--,1)}return!r});n()}},{key:"clear",value:function(){this.renderElements.length=0,this.renderBgElements.length=0}},{key:"update",value:function(e){var t=this;this.renderBgElements.length=0,this.renderBgElements.push({type:"dynamic",image:_,position:{x:400,y:300}}),this.renderBgElements.push({type:"mars",image:w,position:{x:400,y:0}});var n=e.getRockets();if(n.length){var o=function(n){n.getDestroyId()===h.DESTROY_BY_ASTEROID&&(t.renderElements.push({type:"asteroid",image:new d.default,position:{x:n.getPosition(Date.now()).x,y:250}}),e.setTimeout(function(){e.destroyRocket(n)},1e3)),n.getDestroyId()===h.DESTROY_ON_LANDING&&e.setTimeout(function(){e.destroyRocket(n)},4e3)},r=!0,i=!1,a=void 0;try{for(var u,s=n[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){o(u.value)}}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}}}},{key:"_clear",value:function(){this.context.clearRect(-1,-1,this.canvas.width+3,this.canvas.height+3)}},{key:"_renderElement",value:function(e,t){this.context.save(),this.context.translate(t.position.x,t.position.y),"explosion"===t.type&&(t.position.z<.2&&(t.position.z=.2),this.context.scale(t.position.z,t.position.z));var n=t.image.render(this.context,e);return this.context.restore(),n}},{key:"_renderRocket",value:function(e,t){if(!t.getIsDestroyed()){var n=t.getPosition(e),o=t.getRotate(e)*(Math.PI/180);this.context.save(),this.context.translate(n.x,n.y),this.context.rotate(o),this.context.scale(n.z,n.z),v[t.getNum()].render(this.context,e),!t.getIsRunned()||t.getBehaviour()instanceof a.default||(this.context.translate(2,72),m.render(this.context,e)),this.context.restore(),this.context.save(),this.context.translate(n.x,n.y),this.context.restore()}}}]),t}();t.default=O},function(e,t,n){"use strict";var o=n(0),r=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}i(n(2)).default.onReady(function(){new r.default({containerId:"the-game",width:o.GAME_WIDTH,height:o.GAME_HEIGHT}).show()})}]);